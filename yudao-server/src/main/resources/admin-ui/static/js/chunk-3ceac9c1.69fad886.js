(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3ceac9c1"],{"1f9d":function(e,t,n){"use strict";n("f1a1")},6046:function(e,t,n){"use strict";n.d(t,"e",(function(){return i})),n.d(t,"d",(function(){return o})),n.d(t,"f",(function(){return c})),n.d(t,"g",(function(){return r})),n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return p})),n.d(t,"c",(function(){return l}));var a=n("b775");function i(e){return Object(a["a"])({url:"/bpm/model/page",method:"get",params:e})}function o(e){return Object(a["a"])({url:"/bpm/model/get?id="+e,method:"get"})}function c(e){return Object(a["a"])({url:"/bpm/model/update",method:"PUT",data:e})}function r(e,t){return Object(a["a"])({url:"/bpm/model/update-state",method:"put",data:{id:e,state:t}})}function s(e){return Object(a["a"])({url:"/bpm/model/create",method:"POST",data:e})}function p(e){return Object(a["a"])({url:"/bpm/model/delete?id="+e,method:"DELETE"})}function l(e){return Object(a["a"])({url:"/bpm/model/deploy?id="+e,method:"POST"})}},8433:function(e,t,n){},bd4f:function(e,t,n){"use strict";n("8433")},c758:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[n("my-process-designer",e._b({key:"designer-"+e.reloadIndex,ref:"processDesigner",attrs:{keyboard:""},on:{"init-finished":e.initModeler,save:e.save},model:{value:e.xmlString,callback:function(t){e.xmlString=t},expression:"xmlString"}},"my-process-designer",e.controlForm,!1)),n("my-properties-panel",{key:"penal-"+e.reloadIndex,staticClass:"process-panel",attrs:{"bpmn-modeler":e.modeler,prefix:e.controlForm.prefix,model:e.model}})],1)},i=[],o=n("5530"),c={"Exclusive Gateway":"Exklusives Gateway","Parallel Gateway":"Paralleles Gateway","Inclusive Gateway":"Inklusives Gateway","Complex Gateway":"Komplexes Gateway","Event based Gateway":"Ereignis-basiertes Gateway","Message Start Event":"消息启动事件","Timer Start Event":"定时启动事件","Conditional Start Event":"条件启动事件","Signal Start Event":"信号启动事件","Error Start Event":"错误启动事件","Escalation Start Event":"升级启动事件","Compensation Start Event":"补偿启动事件","Message Start Event (non-interrupting)":"消息启动事件 (非中断)","Timer Start Event (non-interrupting)":"定时启动事件 (非中断)","Conditional Start Event (non-interrupting)":"条件启动事件 (非中断)","Signal Start Event (non-interrupting)":"信号启动事件 (非中断)","Escalation Start Event (non-interrupting)":"升级启动事件 (非中断)"},r=(n("ac1f"),n("5319"),n("87f2")),s=n("7a6b"),p=n("dbc8"),l=n("145d"),d=n("cf0a"),m=n("78f9");function u(e,t,n,a,i,o,c,r,s,p,l,d,u){e=e||{},a.registerProvider(this),this._contextPad=a,this._modeling=i,this._elementFactory=o,this._connect=c,this._create=r,this._popupMenu=s,this._canvas=p,this._rules=l,this._translate=d,!1!==e.autoPlace&&(this._autoPlace=t.get("autoPlace",!1)),n.on("create.end",250,(function(e){var t=e.context,n=t.shape;if(Object(m["a"])(e)&&a.isOpen(n)){var i=a.getEntries(n);i.replace&&i.replace.action.click(e,n)}}))}function b(e,t,n){var a=e.$instanceOf(t),i=!1,o=e.eventDefinitions||[];return Object(r["forEach"])(o,(function(e){e.$type===n&&(i=!0)})),a&&i}u.$inject=["config.contextPad","injector","eventBus","contextPad","modeling","elementFactory","connect","create","popupMenu","canvas","rules","translate","elementRegistry"],u.prototype.getContextPadEntries=function(e){var t=this._contextPad,n=this._modeling,a=this._elementFactory,i=this._connect,o=this._create,c=this._popupMenu,m=this._canvas,u=this._rules,v=this._autoPlace,g=this._translate,f={};if("label"===e.type)return f;var h=e.businessObject;function y(e,t){i.start(e,t)}function E(){n.removeElements([e])}function j(e){var n=5,a=m.getContainer(),i=t.getPad(e).html,o=a.getBoundingClientRect(),c=i.getBoundingClientRect(),r=c.top-o.top,s=c.left-o.left,p={x:s,y:r+c.height+n};return p}function O(e,t,n,i){function c(t,n){var c=a.createShape(Object(r["assign"])({type:e},i));o.start(t,c,{source:n})}"string"!==typeof n&&(i=n,n=g("Append {type}",{type:e.replace(/^bpmn:/,"")}));var s=v?function(t,n){var o=a.createShape(Object(r["assign"])({type:e},i));v.append(n,o)}:c;return{group:"model",className:t,title:n,action:{dragstart:c,click:s}}}function x(e){return function(a,i){n.splitLane(i,e),t.open(i,!0)}}if(Object(l["b"])(h,["bpmn:Lane","bpmn:Participant"])&&Object(p["f"])(h)){var w=Object(d["d"])(e);Object(r["assign"])(f,{"lane-insert-above":{group:"lane-insert-above",className:"bpmn-icon-lane-insert-above",title:g("Add Lane above"),action:{click:function(e,t){n.addLane(t,"top")}}}}),w.length<2&&(e.height>=120&&Object(r["assign"])(f,{"lane-divide-two":{group:"lane-divide",className:"bpmn-icon-lane-divide-two",title:g("Divide into two Lanes"),action:{click:x(2)}}}),e.height>=180&&Object(r["assign"])(f,{"lane-divide-three":{group:"lane-divide",className:"bpmn-icon-lane-divide-three",title:g("Divide into three Lanes"),action:{click:x(3)}}})),Object(r["assign"])(f,{"lane-insert-below":{group:"lane-insert-below",className:"bpmn-icon-lane-insert-below",title:g("Add Lane below"),action:{click:function(e,t){n.addLane(t,"bottom")}}}})}Object(s["b"])(h,"bpmn:FlowNode")&&(Object(s["b"])(h,"bpmn:EventBasedGateway")?Object(r["assign"])(f,{"append.receive-task":O("bpmn:ReceiveTask","bpmn-icon-receive-task",g("Append ReceiveTask")),"append.message-intermediate-event":O("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-message",g("Append MessageIntermediateCatchEvent"),{eventDefinitionType:"bpmn:MessageEventDefinition"}),"append.timer-intermediate-event":O("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-timer",g("Append TimerIntermediateCatchEvent"),{eventDefinitionType:"bpmn:TimerEventDefinition"}),"append.condition-intermediate-event":O("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-condition",g("Append ConditionIntermediateCatchEvent"),{eventDefinitionType:"bpmn:ConditionalEventDefinition"}),"append.signal-intermediate-event":O("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-signal",g("Append SignalIntermediateCatchEvent"),{eventDefinitionType:"bpmn:SignalEventDefinition"})}):b(h,"bpmn:BoundaryEvent","bpmn:CompensateEventDefinition")?Object(r["assign"])(f,{"append.compensation-activity":O("bpmn:Task","bpmn-icon-task",g("Append compensation activity"),{isForCompensation:!0})}):Object(s["b"])(h,"bpmn:EndEvent")||h.isForCompensation||b(h,"bpmn:IntermediateThrowEvent","bpmn:LinkEventDefinition")||Object(p["e"])(h)||Object(r["assign"])(f,{"append.end-event":O("bpmn:EndEvent","bpmn-icon-end-event-none",g("Append EndEvent")),"append.gateway":O("bpmn:ExclusiveGateway","bpmn-icon-gateway-none",g("Append Gateway")),"append.append-task":O("bpmn:UserTask","bpmn-icon-user-task",g("Append Task")),"append.intermediate-event":O("bpmn:IntermediateThrowEvent","bpmn-icon-intermediate-event-none",g("Append Intermediate/Boundary Event"))})),c.isEmpty(e,"bpmn-replace")||Object(r["assign"])(f,{replace:{group:"edit",className:"bpmn-icon-screw-wrench",title:g("Change type"),action:{click:function(e,t){var n=Object(r["assign"])(j(t),{cursor:{x:e.x,y:e.y}});c.open(t,"bpmn-replace",n)}}}}),Object(l["b"])(h,["bpmn:FlowNode","bpmn:InteractionNode","bpmn:DataObjectReference","bpmn:DataStoreReference"])&&Object(r["assign"])(f,{"append.text-annotation":O("bpmn:TextAnnotation","bpmn-icon-text-annotation"),connect:{group:"connect",className:"bpmn-icon-connection-multi",title:g("Connect using "+(h.isForCompensation?"":"Sequence/MessageFlow or ")+"Association"),action:{click:y,dragstart:y}}}),Object(l["b"])(h,["bpmn:DataObjectReference","bpmn:DataStoreReference"])&&Object(r["assign"])(f,{connect:{group:"connect",className:"bpmn-icon-connection-multi",title:g("Connect using DataInputAssociation"),action:{click:y,dragstart:y}}}),Object(s["b"])(h,"bpmn:Group")&&Object(r["assign"])(f,{"append.text-annotation":O("bpmn:TextAnnotation","bpmn-icon-text-annotation")});var S=u.allowed("elements.delete",{elements:[e]});return Object(r["isArray"])(S)&&(S=S[0]===e),S&&Object(r["assign"])(f,{delete:{group:"edit",className:"bpmn-icon-trash",title:g("Remove"),action:{click:E}}}),f};var v={__init__:["contextPadProvider"],contextPadProvider:["type",u]},g=n("fb2b");function f(e,t,n,a,i,o,c,r){g["a"].call(this,e,t,n,a,i,o,c,r,2e3)}var h=function(){};h.prototype=g["a"].prototype,h.prototype.getPaletteEntries=function(){var e={},t=this._create,n=this._elementFactory,a=this._spaceTool,i=this._lassoTool,o=this._handTool,c=this._globalConnect,s=this._translate;function p(e,a,i,o,c){function p(a){var i=n.createShape(Object(r["assign"])({type:e},c));c&&(i.businessObject.di.isExpanded=c.isExpanded),t.start(a,i)}var l=e.replace(/^bpmn:/,"");return{group:a,className:i,title:o||s("Create {type}",{type:l}),action:{dragstart:p,click:p}}}function l(e){var a=n.createShape({type:"bpmn:SubProcess",x:0,y:0,isExpanded:!0}),i=n.createShape({type:"bpmn:StartEvent",x:40,y:82,parent:a});t.start(e,[a,i],{hints:{autoSelect:[i]}})}function d(e){t.start(e,n.createParticipantShape())}return Object(r["assign"])(e,{"hand-tool":{group:"tools",className:"bpmn-icon-hand-tool",title:s("Activate the hand tool"),action:{click:function(e){o.activateHand(e)}}},"lasso-tool":{group:"tools",className:"bpmn-icon-lasso-tool",title:s("Activate the lasso tool"),action:{click:function(e){i.activateSelection(e)}}},"space-tool":{group:"tools",className:"bpmn-icon-space-tool",title:s("Activate the create/remove space tool"),action:{click:function(e){a.activateSelection(e)}}},"global-connect-tool":{group:"tools",className:"bpmn-icon-connection-multi",title:s("Activate the global connect tool"),action:{click:function(e){c.toggle(e)}}},"tool-separator":{group:"tools",separator:!0},"create.start-event":p("bpmn:StartEvent","event","bpmn-icon-start-event-none",s("Create StartEvent")),"create.intermediate-event":p("bpmn:IntermediateThrowEvent","event","bpmn-icon-intermediate-event-none",s("Create Intermediate/Boundary Event")),"create.end-event":p("bpmn:EndEvent","event","bpmn-icon-end-event-none",s("Create EndEvent")),"create.exclusive-gateway":p("bpmn:ExclusiveGateway","gateway","bpmn-icon-gateway-none",s("Create Gateway")),"create.user-task":p("bpmn:UserTask","activity","bpmn-icon-user-task",s("Create User Task")),"create.data-object":p("bpmn:DataObjectReference","data-object","bpmn-icon-data-object",s("Create DataObjectReference")),"create.data-store":p("bpmn:DataStoreReference","data-store","bpmn-icon-data-store",s("Create DataStoreReference")),"create.subprocess-expanded":{group:"activity",className:"bpmn-icon-subprocess-expanded",title:s("Create expanded SubProcess"),action:{dragstart:l,click:l}},"create.participant-expanded":{group:"collaboration",className:"bpmn-icon-participant",title:s("Create Pool/Participant"),action:{dragstart:d,click:d}},"create.group":p("bpmn:Group","artifact","bpmn-icon-group",s("Create Group"))}),e},f.$inject=["palette","create","elementFactory","spaceTool","lassoTool","handTool","globalConnect","translate"],f.prototype=new h,f.prototype.constructor=f;var y={__init__:["paletteProvider"],paletteProvider:["type",f]},E=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"my-process-palette"},[n("div",{staticClass:"test-button",on:{click:e.addTask,mousedown:e.addTask}},[e._v("测试任务")]),n("div",{staticClass:"test-container",attrs:{id:"palette-container"}},[e._v("1")])])},j=[],O={name:"MyProcessPalette",data:function(){return{}},mounted:function(){},methods:{addTask:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=window.bpmnInstances.elementFactory,a=window.bpmnInstances.modeler.get("create");console.log(n,a);var i=n.createShape(Object(r["assign"])({type:"bpmn:UserTask"},t));t&&(i.businessObject.di.isExpanded=t.isExpanded),a.start(e,i)}}},x=O,w=(n("bd4f"),n("2877")),S=Object(w["a"])(x,E,j,!1,null,"12565c53",null),k=S.exports,C=n("6046"),_={name:"App",components:{MyProcessPalette:k},data:function(){return{xmlString:"",modeler:null,reloadIndex:0,controlDrawerVisible:!1,translationsSelf:c,controlForm:{simulation:!0,labelEditing:!1,labelVisible:!1,prefix:"activiti",headerButtonSize:"mini",additionalModel:[v,y]},addis:{CustomContentPadProvider:v,CustomPaletteProvider:y},model:{}}},created:function(){var e=this,t=this.$route.query&&this.$route.query.modelId;t&&Object(C["d"])(t).then((function(t){e.xmlString=t.data.bpmnXml,e.model=Object(o["a"])(Object(o["a"])({},t.data),{},{bpmnXml:void 0})}))},methods:{initModeler:function(e){var t=this;setTimeout((function(){t.modeler=e,console.log(e)}),10)},reloadProcessDesigner:function(e){for(var t in this.controlForm.additionalModel=[],this.addis)this.addis[t]&&this.controlForm.additionalModel.push(this.addis[t]);e&&(this.xmlString=void 0),this.reloadIndex+=1,this.modeler=null},save:function(e){var t=this,n=Object(o["a"])(Object(o["a"])({},this.model),{},{bpmnXml:e});n.id?Object(C["f"])(n).then((function(e){t.$modal.msgSuccess("修改成功"),t.close()})):Object(C["a"])(n).then((function(e){t.$modal.msgSuccess("保存成功"),t.close()}))},close:function(){this.$tab.closeOpenPage({path:"/bpm/manager/model"})}}},P=_,T=(n("1f9d"),Object(w["a"])(P,a,i,!1,null,null,null));t["default"]=T.exports},f1a1:function(e,t,n){}}]);