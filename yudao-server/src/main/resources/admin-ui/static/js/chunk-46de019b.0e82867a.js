(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-46de019b"],{"04d1":function(e,t,r){var n=r("342f"),s=n.match(/firefox\/(\d+)/i);e.exports=!!s&&+s[1]},"0f880":function(e,t,r){"use strict";r.r(t),t["default"]={"list-type":function(e,t,r){var n=[],s=t.__config__;return"picture-card"===t["list-type"]?n.push(e("i",{class:"el-icon-plus"})):n.push(e("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-upload"}},[s.buttonText])),s.showTip&&n.push(e("div",{slot:"tip",class:"el-upload__tip"},["只能上传不超过 ",s.fileSize,s.sizeUnit," 的",t.accept,"文件"])),n}}},"12d7":function(e,t,r){"use strict";r("79f8")},"167d":function(e,t,r){"use strict";r.r(t),t["default"]={prepend:function(e,t,r){return e("template",{slot:"prepend"},[t.__slot__[r]])},append:function(e,t,r){return e("template",{slot:"append"},[t.__slot__[r]])}}},2638:function(e,t,r){"use strict";function n(){return n=Object.assign||function(e){for(var t,r=1;r<arguments.length;r++)for(var n in t=arguments[r],t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},n.apply(this,arguments)}var s=["attrs","props","domProps"],o=["class","style","directives"],i=["on","nativeOn"],a=function(e){return e.reduce((function(e,t){for(var r in t)if(e[r])if(-1!==s.indexOf(r))e[r]=n({},e[r],t[r]);else if(-1!==o.indexOf(r)){var a=e[r]instanceof Array?e[r]:[e[r]],u=t[r]instanceof Array?t[r]:[t[r]];e[r]=a.concat(u)}else if(-1!==i.indexOf(r))for(var _ in t[r])if(e[r][_]){var l=e[r][_]instanceof Array?e[r][_]:[e[r][_]],d=t[r][_]instanceof Array?t[r][_]:[t[r][_]];e[r][_]=l.concat(d)}else e[r][_]=t[r][_];else if("hook"==r)for(var f in t[r])e[r][f]=e[r][f]?c(e[r][f],t[r][f]):t[r][f];else e[r]=t[r];else e[r]=t[r];return e}),{})},c=function(e,t){return function(){e&&e.apply(this,arguments),t&&t.apply(this,arguments)}};e.exports=a},"2cfa":function(e,t,r){"use strict";r.r(t);r("d3b7"),r("159b");t["default"]={options:function(e,t,r){var n=[];return t.__slot__.options.forEach((function(r){"button"===t.__config__.optionType?n.push(e("el-radio-button",{attrs:{label:r.value}},[r.label])):n.push(e("el-radio",{attrs:{label:r.value,border:t.border}},[r.label]))})),n}}},3930:function(e,t,r){"use strict";r.d(t,"c",(function(){return s})),r.d(t,"b",(function(){return o})),r.d(t,"a",(function(){return i})),r.d(t,"d",(function(){return a}));var n=r("b775");function s(e){return Object(n["a"])({url:"/bpm/process-instance/my-page",method:"get",params:e})}function o(e){return Object(n["a"])({url:"/bpm/process-instance/create",method:"POST",data:e})}function i(e,t){return Object(n["a"])({url:"/bpm/process-instance/cancel",method:"DELETE",data:{id:e,reason:t}})}function a(e){return Object(n["a"])({url:"/bpm/process-instance/get?id="+e,method:"get"})}},4758:function(e,t,r){"use strict";var n=r("5530"),s=r("2909"),o=r("53ca"),i=(r("d3b7"),r("ddb0"),r("159b"),r("ac1f"),r("5319"),r("b64b"),r("4d63"),r("c607"),r("2c3e"),r("25f0"),r("caad"),r("99af"),r("ed08")),a={},c=r("9977"),u=c.keys()||[];function _(e,t){var r=this;e.props.value=t,e.on.input=function(e){r.$emit("input",e)}}function l(e,t,r){var n=a[t.__config__.tag];n&&Object.keys(n).forEach((function(s){var o=n[s];t.__slot__&&t.__slot__[s]&&r.push(o(e,t,s))}))}function d(e){var t=this;["on","nativeOn"].forEach((function(r){var n=Object.keys(e[r]||{});n.forEach((function(n){var s=e[r][n];"string"===typeof s&&(e[r][n]=function(e){return t.$emit(s,e)})}))}))}function f(e,t){var r=this;Object.keys(e).forEach((function(i){var a=e[i];"__vModel__"===i?_.call(r,t,e.__config__.defaultValue):void 0!==t[i]?null===t[i]||t[i]instanceof RegExp||["boolean","string","number","function"].includes(Object(o["a"])(t[i]))?t[i]=a:Array.isArray(t[i])?t[i]=[].concat(Object(s["a"])(t[i]),Object(s["a"])(a)):t[i]=Object(n["a"])(Object(n["a"])({},t[i]),a):t.attrs[i]=a})),p(t)}function p(e){delete e.attrs.__config__,delete e.attrs.__slot__,delete e.attrs.__methods__}function m(){return{class:{},attrs:{},props:{},domProps:{},nativeOn:{},on:{},style:{},directives:[],scopedSlots:{},slot:null,key:null,ref:null,refInFor:!0}}u.forEach((function(e){var t=e.replace(/^\.\/(.*)\.\w+$/,"$1"),r=c(e).default;a[t]=r})),t["a"]={props:{conf:{type:Object,required:!0}},render:function(e){var t=m(),r=Object(i["d"])(this.conf),n=this.$slots.default||[];return l.call(this,e,r,n),d.call(this,r),f.call(this,r,t),e(this.conf.__config__.tag,t,n)}}},"4e82":function(e,t,r){"use strict";var n=r("23e7"),s=r("e330"),o=r("59ed"),i=r("7b0b"),a=r("07fa"),c=r("577e"),u=r("d039"),_=r("addb"),l=r("a640"),d=r("04d1"),f=r("d998"),p=r("2d00"),m=r("512ce"),b=[],h=s(b.sort),g=s(b.push),v=u((function(){b.sort(void 0)})),O=u((function(){b.sort(null)})),y=l("sort"),j=!u((function(){if(p)return p<70;if(!(d&&d>3)){if(f)return!0;if(m)return m<603;var e,t,r,n,s="";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:r=3;break;case 68:case 71:r=4;break;default:r=2}for(n=0;n<47;n++)b.push({k:t+n,v:r})}for(b.sort((function(e,t){return t.v-e.v})),n=0;n<b.length;n++)t=b[n].k.charAt(0),s.charAt(s.length-1)!==t&&(s+=t);return"DGBEFHACIJK"!==s}})),E=v||!O||!y||!j,I=function(e){return function(t,r){return void 0===r?-1:void 0===t?1:void 0!==e?+e(t,r)||0:c(t)>c(r)?1:-1}};n({target:"Array",proto:!0,forced:E},{sort:function(e){void 0!==e&&o(e);var t=i(this);if(j)return void 0===e?h(t):h(t,e);var r,n,s=[],c=a(t);for(n=0;n<c;n++)n in t&&g(s,t[n]);_(s,I(e)),r=s.length,n=0;while(n<r)t[n]=s[n++];while(n<c)delete t[n++];return t}})},"512ce":function(e,t,r){var n=r("342f"),s=n.match(/AppleWebKit\/(\d+)\./);e.exports=!!s&&+s[1]},"79f8":function(e,t,r){},"7f29":function(e,t,r){"use strict";r.r(t);r("d3b7"),r("159b");t["default"]={options:function(e,t,r){var n=[];return t.__slot__.options.forEach((function(t){n.push(e("el-option",{attrs:{label:t.label,value:t.value,disabled:t.disabled}}))})),n}}},8173:function(e,t,r){"use strict";r.d(t,"d",(function(){return s})),r.d(t,"b",(function(){return o})),r.d(t,"a",(function(){return i})),r.d(t,"e",(function(){return a})),r.d(t,"f",(function(){return c})),r.d(t,"c",(function(){return u}));var n=r("b775");function s(e){return Object(n["a"])({url:"/bpm/task/todo-page",method:"get",params:e})}function o(e){return Object(n["a"])({url:"/bpm/task/done-page",method:"get",params:e})}function i(e){return Object(n["a"])({url:"/bpm/task/approve",method:"PUT",data:e})}function a(e){return Object(n["a"])({url:"/bpm/task/reject",method:"PUT",data:e})}function c(e){return Object(n["a"])({url:"/bpm/task/update-assignee",method:"PUT",data:e})}function u(e){return Object(n["a"])({url:"/bpm/task/list-by-process-instance-id?processInstanceId="+e,method:"get"})}},"893f":function(e,t,r){"use strict";r.d(t,"c",(function(){return s})),r.d(t,"b",(function(){return o})),r.d(t,"a",(function(){return i}));var n=r("b775");function s(e){return Object(n["a"])({url:"/bpm/process-definition/page",method:"get",params:e})}function o(e){return Object(n["a"])({url:"/bpm/process-definition/list",method:"get",params:e})}function i(e){return Object(n["a"])({url:"/bpm/process-definition/get-bpmn-xml?id="+e,method:"get"})}},9413:function(e,t,r){"use strict";r.r(t);r("d3b7"),r("159b");t["default"]={options:function(e,t,r){var n=[];return t.__slot__.options.forEach((function(r){"button"===t.__config__.optionType?n.push(e("el-checkbox-button",{attrs:{label:r.value}},[r.label])):n.push(e("el-checkbox",{attrs:{label:r.value,border:t.border}},[r.label]))})),n}}},9977:function(e,t,r){var n={"./el-button.js":"aace","./el-checkbox-group.js":"9413","./el-input.js":"167d","./el-radio-group.js":"2cfa","./el-select.js":"7f29","./el-upload.js":"0f880"};function s(e){var t=o(e);return r(t)}function o(e){if(!r.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}s.keys=function(){return Object.keys(n)},s.resolve=o,e.exports=s,s.id="9977"},"9f75":function(e,t,r){"use strict";var n,s,o=r("f50d"),i=o["a"],a=r("2877"),c=Object(a["a"])(i,n,s,!1,null,null,null);t["a"]=c.exports},aace:function(e,t,r){"use strict";r.r(t),t["default"]={default:function(e,t,r){return t.__slot__[r]}}},c0c7:function(e,t,r){"use strict";r.d(t,"i",(function(){return o})),r.d(t,"h",(function(){return i})),r.d(t,"e",(function(){return a})),r.d(t,"a",(function(){return c})),r.d(t,"k",(function(){return u})),r.d(t,"c",(function(){return _})),r.d(t,"d",(function(){return l})),r.d(t,"j",(function(){return d})),r.d(t,"b",(function(){return f})),r.d(t,"f",(function(){return p})),r.d(t,"l",(function(){return m})),r.d(t,"m",(function(){return b})),r.d(t,"n",(function(){return h})),r.d(t,"g",(function(){return g}));var n=r("b775"),s=r("c38a");function o(e){return Object(n["a"])({url:"/system/user/page",method:"get",params:e})}function i(){return Object(n["a"])({url:"/system/user/list-all-simple",method:"get"})}function a(e){return Object(n["a"])({url:"/system/user/get?id="+Object(s["g"])(e),method:"get"})}function c(e){return Object(n["a"])({url:"/system/user/create",method:"post",data:e})}function u(e){return Object(n["a"])({url:"/system/user/update",method:"put",data:e})}function _(e){return Object(n["a"])({url:"/system/user/delete?id="+e,method:"delete"})}function l(e){return Object(n["a"])({url:"/system/user/export",method:"get",params:e,responseType:"blob"})}function d(e,t){var r={id:e,password:t};return Object(n["a"])({url:"/system/user/update-password",method:"put",data:r})}function f(e,t){var r={id:e,status:t};return Object(n["a"])({url:"/system/user/update-status",method:"put",data:r})}function p(){return Object(n["a"])({url:"/system/user/profile/get",method:"get"})}function m(e){return Object(n["a"])({url:"/system/user/profile/update",method:"put",data:e})}function b(e,t){var r={oldPassword:e,newPassword:t};return Object(n["a"])({url:"/system/user/profile/update-password",method:"put",data:r})}function h(e){return Object(n["a"])({url:"/system/user/profile/update-avatar",method:"put",data:e})}function g(){return Object(n["a"])({url:"/system/user/get-import-template",method:"get",responseType:"blob"})}},d998:function(e,t,r){var n=r("342f");e.exports=/MSIE|Trident/.test(n)},dbbb:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-container"},[e._l(e.runningTasks,(function(t,n){return r("el-card",{directives:[{name:"loading",rawName:"v-loading",value:e.processInstanceLoading,expression:"processInstanceLoading"}],key:n,staticClass:"box-card"},[r("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[r("span",{staticClass:"el-icon-picture-outline"},[e._v("审批任务【"+e._s(t.name)+"】")])]),r("el-col",{attrs:{span:16,offset:6}},[r("el-form",{ref:"form"+n,refInFor:!0,attrs:{model:e.auditForms[n],rules:e.auditRule,"label-width":"100px"}},[e.processInstance&&e.processInstance.name?r("el-form-item",{attrs:{label:"流程名"}},[e._v(" "+e._s(e.processInstance.name)+" ")]):e._e(),e.processInstance&&e.processInstance.startUser?r("el-form-item",{attrs:{label:"流程发起人"}},[e._v(" "+e._s(e.processInstance.startUser.nickname)+" "),r("el-tag",{attrs:{type:"info",size:"mini"}},[e._v(e._s(e.processInstance.startUser.deptName))])],1):e._e(),r("el-form-item",{attrs:{label:"审批建议",prop:"comment"}},[r("el-input",{attrs:{type:"textarea",placeholder:"请输入审批建议"},model:{value:e.auditForms[n].comment,callback:function(t){e.$set(e.auditForms[n],"comment",t)},expression:"auditForms[index].comment"}})],1)],1),r("div",{staticStyle:{"margin-left":"10%","margin-bottom":"20px","font-size":"14px"}},[r("el-button",{attrs:{icon:"el-icon-edit-outline",type:"success",size:"mini"},on:{click:function(r){return e.handleAudit(t,!0)}}},[e._v("通过")]),r("el-button",{attrs:{icon:"el-icon-circle-close",type:"danger",size:"mini"},on:{click:function(r){return e.handleAudit(t,!1)}}},[e._v("不通过")]),r("el-button",{attrs:{icon:"el-icon-edit-outline",type:"primary",size:"mini"},on:{click:function(r){return e.handleUpdateAssignee(t)}}},[e._v("转办")]),r("el-button",{attrs:{icon:"el-icon-edit-outline",type:"primary",size:"mini"},on:{click:function(r){return e.handleDelegate(t)}}},[e._v("委派")]),r("el-button",{attrs:{icon:"el-icon-refresh-left",type:"warning",size:"mini"},on:{click:function(r){return e.handleBack(t)}}},[e._v("退回")])],1)],1)],1)})),r("el-card",{directives:[{name:"loading",rawName:"v-loading",value:e.processInstanceLoading,expression:"processInstanceLoading"}],staticClass:"box-card"},[r("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[r("span",{staticClass:"el-icon-document"},[e._v("申请信息【"+e._s(e.processInstance.name)+"】")])]),this.processInstance.processDefinition&&10===this.processInstance.processDefinition.formType?r("el-col",{attrs:{span:16,offset:6}},[r("div",[r("parser",{key:(new Date).getTime(),attrs:{"form-conf":e.detailForm},on:{submit:e.submitForm}})],1)]):e._e(),this.processInstance.processDefinition&&20===this.processInstance.processDefinition.formType?r("div",[r("router-link",{attrs:{to:this.processInstance.processDefinition.formCustomViewPath+"?id="+this.processInstance.businessKey}},[r("el-button",{attrs:{type:"primary"}},[e._v("点击查看")])],1)],1):e._e()],1),r("el-card",{directives:[{name:"loading",rawName:"v-loading",value:e.tasksLoad,expression:"tasksLoad"}],staticClass:"box-card"},[r("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[r("span",{staticClass:"el-icon-picture-outline"},[e._v("审批记录")])]),r("el-col",{attrs:{span:16,offset:4}},[r("div",{staticClass:"block"},[r("el-timeline",e._l(e.tasks,(function(t,n){return r("el-timeline-item",{key:n,attrs:{icon:e.getTimelineItemIcon(t),type:e.getTimelineItemType(t)}},[r("p",{staticStyle:{"font-weight":"700"}},[e._v("任务："+e._s(t.name))]),r("el-card",{attrs:{"body-style":{padding:"10px"}}},[t.assigneeUser?r("label",{staticStyle:{"font-weight":"normal","margin-right":"30px"}},[e._v(" 审批人："+e._s(t.assigneeUser.nickname)+" "),r("el-tag",{attrs:{type:"info",size:"mini"}},[e._v(e._s(t.assigneeUser.deptName))])],1):e._e(),r("label",{staticStyle:{"font-weight":"normal"}},[e._v("创建时间：")]),r("label",{staticStyle:{color:"#8a909c","font-weight":"normal"}},[e._v(e._s(e.parseTime(t.createTime)))]),t.endTime?r("label",{staticStyle:{"margin-left":"30px","font-weight":"normal"}},[e._v("审批时间：")]):e._e(),t.endTime?r("label",{staticStyle:{color:"#8a909c","font-weight":"normal"}},[e._v(" "+e._s(e.parseTime(t.endTime)))]):e._e(),t.durationInMillis?r("label",{staticStyle:{"margin-left":"30px","font-weight":"normal"}},[e._v("耗时：")]):e._e(),t.durationInMillis?r("label",{staticStyle:{color:"#8a909c","font-weight":"normal"}},[e._v(" "+e._s(e.getDateStar(t.durationInMillis))+" ")]):e._e(),t.comment?r("p",[r("el-tag",{attrs:{type:e.getTimelineItemType(t)}},[e._v(e._s(t.comment))])],1):e._e()])],1)})),1)],1)])],1),r("el-card",{directives:[{name:"loading",rawName:"v-loading",value:e.processInstanceLoading,expression:"processInstanceLoading"}],staticClass:"box-card"},[r("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[r("span",{staticClass:"el-icon-picture-outline"},[e._v("流程图")])]),r("my-process-viewer",e._b({key:"designer",attrs:{activityData:e.activityList,processInstanceData:e.processInstance,taskData:e.tasks},model:{value:e.bpmnXML,callback:function(t){e.bpmnXML=t},expression:"bpmnXML"}},"my-process-viewer",e.bpmnControlForm,!1))],1),r("el-dialog",{attrs:{title:"转派审批人",visible:e.updateAssignee.open,width:"500px","append-to-body":""},on:{"update:visible":function(t){return e.$set(e.updateAssignee,"open",t)}}},[r("el-form",{ref:"updateAssigneeForm",attrs:{model:e.updateAssignee.form,rules:e.updateAssignee.rules,"label-width":"110px"}},[r("el-form-item",{attrs:{label:"新审批人",prop:"assigneeUserId"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{clearable:""},model:{value:e.updateAssignee.form.assigneeUserId,callback:function(t){e.$set(e.updateAssignee.form,"assigneeUserId",t)},expression:"updateAssignee.form.assigneeUserId"}},e._l(e.userOptions,(function(e){return r("el-option",{key:parseInt(e.id),attrs:{label:e.nickname,value:parseInt(e.id)}})})),1)],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:e.submitUpdateAssigneeForm}},[e._v("确 定")]),r("el-button",{on:{click:e.cancelUpdateAssigneeForm}},[e._v("取 消")])],1)],1)],2)},s=[],o=r("5530"),i=r("2909"),a=(r("d3b7"),r("159b"),r("4e82"),r("ddb0"),r("893f")),c=r("b48e"),u=r("4360"),_=r("fd8e"),l=r("9f75"),d=r("3930"),f=r("8173"),p=r("fa1c"),m=r("c0c7"),b=r("b775");function h(e){return Object(b["a"])({url:"/bpm/activity/list",method:"get",params:e})}var g={name:"ProcessInstanceDetail",components:{Parser:l["a"]},data:function(){return{processInstanceLoading:!0,id:void 0,processInstance:{},detailForm:{fields:[]},bpmnXML:null,bpmnControlForm:{prefix:"activiti"},activityList:[],tasksLoad:!0,tasks:[],runningTasks:[],auditForms:[],auditRule:{comment:[{required:!0,message:"审批建议不能为空",trigger:"blur"}]},userOptions:[],updateAssignee:{open:!1,form:{assigneeUserId:void 0},rules:{assigneeUserId:[{required:!0,message:"新审批人不能为空",trigger:"change"}]}},categoryDictDatas:Object(c["c"])(c["a"].BPM_MODEL_CATEGORY)}},created:function(){var e=this;this.id=this.$route.query.id,this.id?(this.getDetail(),this.userOptions=[],Object(m["h"])().then((function(t){var r;(r=e.userOptions).push.apply(r,Object(i["a"])(t.data))}))):this.$message.error("未传递 id 参数，无法查看流程信息")},methods:{getDetail:function(){var e=this;this.processInstanceLoading=!0,Object(d["d"])(this.id).then((function(t){t.data?(e.processInstance=t.data,10===e.processInstance.processDefinition.formType&&(e.detailForm=Object(o["a"])(Object(o["a"])({},JSON.parse(e.processInstance.processDefinition.formConf)),{},{disabled:!0,formBtns:!1,fields:Object(_["a"])(e.processInstance.processDefinition.formFields)}),e.detailForm.fields.forEach((function(t){var r=e.processInstance.formVariables[t.__vModel__];r&&(t.__config__.defaultValue=r)}))),Object(a["a"])(e.processInstance.processDefinition.id).then((function(t){e.bpmnXML=t.data})),h({processInstanceId:e.processInstance.id}).then((function(t){e.activityList=t.data})),e.processInstanceLoading=!1):e.$message.error("查询不到流程信息！")})),this.tasksLoad=!0,this.runningTasks=[],this.auditForms=[],Object(f["c"])(this.id).then((function(t){e.tasks=t.data,e.tasks.sort((function(e,t){return e.endTime&&t.endTime?t.endTime-e.endTime:e.endTime?1:t.endTime?-1:t.createTime-e.createTime}));var r=u["a"].getters.userId;e.tasks.forEach((function(t){1===t.result&&t.assigneeUser&&t.assigneeUser.id===r&&(e.runningTasks.push(Object(o["a"])({},t)),e.auditForms.push({comment:""}))})),e.tasksLoad=!1}))},handleSelect:function(e){this.selectProcessInstance=e,e.formId?this.detailForm=Object(o["a"])(Object(o["a"])({},JSON.parse(e.formConf)),{},{fields:Object(_["a"])(e.formFields)}):e.formCustomCreatePath&&this.$router.push({path:e.formCustomCreatePath})},submitForm:function(e){var t=this;if(e){var r=e.conf;r.disabled=!0,r.formBtns=!1;var n=e.values;Object(d["b"])({processDefinitionId:this.selectProcessInstance.id,variables:n}).then((function(e){t.$modal.msgSuccess("发起流程成功"),t.$tab.closeOpenPage(),t.$router.go(-1)})).catch((function(){r.disabled=!1,r.formBtns=!0}))}},getDateStar:function(e){return Object(p["a"])(e)},getTimelineItemIcon:function(e){return 1===e.result?"el-icon-time":2===e.result?"el-icon-check":3===e.result?"el-icon-close":4===e.result?"el-icon-remove-outline":""},getTimelineItemType:function(e){return 1===e.result?"primary":2===e.result?"success":3===e.result?"danger":4===e.result?"info":""},handleAudit:function(e,t){var r=this,n=this.runningTasks.indexOf(e);this.$refs["form"+n][0].validate((function(s){if(s){var o={id:e.id,comment:r.auditForms[n].comment};t?Object(f["a"])(o).then((function(e){r.$modal.msgSuccess("审批通过成功！"),r.getDetail()})):Object(f["e"])(o).then((function(e){r.$modal.msgSuccess("审批不通过成功！"),r.getDetail()}))}}))},handleUpdateAssignee:function(e){this.resetUpdateAssigneeForm(),this.updateAssignee.form.id=e.id,this.updateAssignee.open=!0},submitUpdateAssigneeForm:function(){var e=this;this.$refs["updateAssigneeForm"].validate((function(t){t&&Object(f["f"])(e.updateAssignee.form).then((function(t){e.$modal.msgSuccess("转派任务成功！"),e.updateAssignee.open=!1,e.getDetail()}))}))},cancelUpdateAssigneeForm:function(){this.updateAssignee.open=!1,this.resetUpdateAssigneeForm()},resetUpdateAssigneeForm:function(){this.updateAssignee.form={id:void 0,assigneeUserId:void 0},this.resetForm("updateAssigneeForm")},handleDelegate:function(e){this.$modal.msgError("暂不支持【委派】功能，可以使用【转派】替代！")},handleBack:function(e){this.$modal.msgError("暂不支持【退回】功能！")}}},v=g,O=(r("12d7"),r("2877")),y=Object(O["a"])(v,n,s,!1,null,null,null);t["default"]=y.exports},f50d:function(module,__webpack_exports__,__webpack_require__){"use strict";var _Users_cqsongjin_project_ruoyi_vue_pro_yudao_ui_admin_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("ade3"),_vue_babel_helper_vue_jsx_merge_props__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("2638"),_vue_babel_helper_vue_jsx_merge_props__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_vue_babel_helper_vue_jsx_merge_props__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("d81d"),core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_2__),core_js_modules_es_error_cause_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("d9e2"),core_js_modules_es_error_cause_js__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_es_error_cause_js__WEBPACK_IMPORTED_MODULE_3__),core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("d3b7"),core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_4__),core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("159b"),core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_5__),core_js_modules_es_object_keys_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("b64b"),core_js_modules_es_object_keys_js__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(core_js_modules_es_object_keys_js__WEBPACK_IMPORTED_MODULE_6__),_utils_index__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("ed08"),_components_render_render_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("4758"),ruleTrigger={"el-input":"blur","el-input-number":"blur","el-select":"change","el-radio-group":"change","el-checkbox-group":"change","el-cascader":"change","el-time-picker":"change","el-date-picker":"change","el-rate":"change"},layouts={colFormItem:function(e,t){var r=t.__config__,n=buildListeners.call(this,t),s=r.labelWidth?"".concat(r.labelWidth,"px"):null;return!1===r.showLabel&&(s="0"),e("el-col",{attrs:{span:r.span}},[e("el-form-item",{attrs:{"label-width":s,prop:t.__vModel__,label:r.showLabel?r.label:""}},[e(_components_render_render_js__WEBPACK_IMPORTED_MODULE_8__["a"],_vue_babel_helper_vue_jsx_merge_props__WEBPACK_IMPORTED_MODULE_1___default()([{attrs:{conf:t}},{on:n}]))])])},rowFormItem:function(e,t){var r=renderChildren.apply(this,arguments);return"flex"===t.type&&(r=e("el-row",{attrs:{type:t.type,justify:t.justify,align:t.align}},[r])),e("el-col",{attrs:{span:t.span}},[e("el-row",{attrs:{gutter:t.gutter}},[r])])}};function renderFrom(e){var t=this.formConfCopy;return e("el-row",{attrs:{gutter:t.gutter}},[e("el-form",_vue_babel_helper_vue_jsx_merge_props__WEBPACK_IMPORTED_MODULE_1___default()([{attrs:{size:t.size,"label-position":t.labelPosition,disabled:t.disabled,"label-width":"".concat(t.labelWidth,"px")},ref:t.formRef},{props:{model:this[t.formModel]}},{attrs:{rules:this[t.formRules]}}]),[renderFormItem.call(this,e,t.fields),t.formBtns&&formBtns.call(this,e)])])}function formBtns(e){return e("el-col",[e("el-form-item",{attrs:{size:"large"}},[e("el-button",{attrs:{type:"primary"},on:{click:this.submitForm}},["提交"]),e("el-button",{on:{click:this.resetForm}},["重置"])])])}function renderFormItem(e,t){var r=this;return t.map((function(t){var n=t.__config__,s=layouts[n.layout];if(s)return s.call(r,e,t);throw new Error("没有与".concat(n.layout,"匹配的layout"))}))}function renderChildren(e,t){var r=t.__config__;return Array.isArray(r.children)?renderFormItem.call(this,e,r.children):null}function setValue(e,t,r){this.$set(t,"defaultValue",e),this.$set(this[this.formConf.formModel],r.__vModel__,e)}function buildListeners(e){var t=this,r=e.__config__,n=this.formConf.__methods__||{},s={};return Object.keys(n).forEach((function(e){s[e]=function(r){return n[e].call(t,r)}})),s.input=function(n){return setValue.call(t,n,r,e)},s}__webpack_exports__["a"]={components:{render:_components_render_render_js__WEBPACK_IMPORTED_MODULE_8__["a"]},props:{formConf:{type:Object,required:!0}},data:function(){var e,t=(e={formConfCopy:Object(_utils_index__WEBPACK_IMPORTED_MODULE_7__["d"])(this.formConf)},Object(_Users_cqsongjin_project_ruoyi_vue_pro_yudao_ui_admin_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__["a"])(e,this.formConf.formModel,{}),Object(_Users_cqsongjin_project_ruoyi_vue_pro_yudao_ui_admin_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__["a"])(e,this.formConf.formRules,{}),e);return this.initFormData(t.formConfCopy.fields,t[this.formConf.formModel]),this.buildRules(t.formConfCopy.fields,t[this.formConf.formRules]),t},methods:{initFormData:function(e,t){var r=this;e.forEach((function(e){var n=e.__config__;e.__vModel__&&(t[e.__vModel__]=n.defaultValue),n.children&&r.initFormData(n.children,t)}))},buildRules:function buildRules(componentList,rules){var _this4=this;componentList.forEach((function(cur){var config=cur.__config__;if(Array.isArray(config.regList)){if(config.required){var required={required:config.required,message:cur.placeholder};Array.isArray(config.defaultValue)&&(required.type="array",required.message="请至少选择一个".concat(config.label)),void 0===required.message&&(required.message="".concat(config.label,"不能为空")),config.regList.push(required)}rules[cur.__vModel__]=config.regList.map((function(item){return item.pattern&&(item.pattern=eval(item.pattern)),item.trigger=ruleTrigger&&ruleTrigger[config.tag],item}))}config.children&&_this4.buildRules(config.children,rules)}))},resetForm:function(){this.formConfCopy=Object(_utils_index__WEBPACK_IMPORTED_MODULE_7__["d"])(this.formConf),this.$refs[this.formConf.formRef].resetFields()},submitForm:function(){var e=this;this.$refs[this.formConf.formRef].validate((function(t){return!!t&&(e.$emit("submit",{conf:e.formConfCopy,values:e[e.formConf.formModel]}),!0)}))}},render:function(e){return renderFrom.call(this,e)}}},fa1c:function(e,t,r){"use strict";function n(e){var t=Math.floor(e/864e5),r=Math.floor(e/36e5-24*t),n=Math.floor(e/6e4-24*t*60-60*r),s=Math.floor(e/1e3-24*t*60*60-60*r*60-60*n);return t>0?t+"天"+r+"小时"+n+"分钟":r>0?r+"小时"+n+"分钟":n>0?n+"分钟":s>0?s+"秒":"0秒"}r.d(t,"a",(function(){return n}))},fd8e:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));r("d3b7"),r("159b");function n(e){var t=[];return e.forEach((function(e){t.push(JSON.parse(e))})),t}}}]);