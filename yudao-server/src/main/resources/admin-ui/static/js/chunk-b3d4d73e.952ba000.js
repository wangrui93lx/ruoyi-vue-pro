(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b3d4d73e"],{"0f880":function(e,t,r){"use strict";r.r(t),t["default"]={"list-type":function(e,t,r){var n=[],_=t.__config__;return"picture-card"===t["list-type"]?n.push(e("i",{class:"el-icon-plus"})):n.push(e("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-upload"}},[_.buttonText])),_.showTip&&n.push(e("div",{slot:"tip",class:"el-upload__tip"},["只能上传不超过 ",_.fileSize,_.sizeUnit," 的",t.accept,"文件"])),n}}},"167d":function(e,t,r){"use strict";r.r(t),t["default"]={prepend:function(e,t,r){return e("template",{slot:"prepend"},[t.__slot__[r]])},append:function(e,t,r){return e("template",{slot:"append"},[t.__slot__[r]])}}},2638:function(e,t,r){"use strict";function n(){return n=Object.assign||function(e){for(var t,r=1;r<arguments.length;r++)for(var n in t=arguments[r],t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},n.apply(this,arguments)}var _=["attrs","props","domProps"],o=["class","style","directives"],s=["on","nativeOn"],i=function(e){return e.reduce((function(e,t){for(var r in t)if(e[r])if(-1!==_.indexOf(r))e[r]=n({},e[r],t[r]);else if(-1!==o.indexOf(r)){var i=e[r]instanceof Array?e[r]:[e[r]],c=t[r]instanceof Array?t[r]:[t[r]];e[r]=i.concat(c)}else if(-1!==s.indexOf(r))for(var l in t[r])if(e[r][l]){var u=e[r][l]instanceof Array?e[r][l]:[e[r][l]],f=t[r][l]instanceof Array?t[r][l]:[t[r][l]];e[r][l]=u.concat(f)}else e[r][l]=t[r][l];else if("hook"==r)for(var d in t[r])e[r][d]=e[r][d]?a(e[r][d],t[r][d]):t[r][d];else e[r]=t[r];else e[r]=t[r];return e}),{})},a=function(e,t){return function(){e&&e.apply(this,arguments),t&&t.apply(this,arguments)}};e.exports=i},"2cfa":function(e,t,r){"use strict";r.r(t);r("d3b7"),r("159b");t["default"]={options:function(e,t,r){var n=[];return t.__slot__.options.forEach((function(r){"button"===t.__config__.optionType?n.push(e("el-radio-button",{attrs:{label:r.value}},[r.label])):n.push(e("el-radio",{attrs:{label:r.value,border:t.border}},[r.label]))})),n}}},3930:function(e,t,r){"use strict";r.d(t,"c",(function(){return _})),r.d(t,"b",(function(){return o})),r.d(t,"a",(function(){return s})),r.d(t,"d",(function(){return i}));var n=r("b775");function _(e){return Object(n["a"])({url:"/bpm/process-instance/my-page",method:"get",params:e})}function o(e){return Object(n["a"])({url:"/bpm/process-instance/create",method:"POST",data:e})}function s(e,t){return Object(n["a"])({url:"/bpm/process-instance/cancel",method:"DELETE",data:{id:e,reason:t}})}function i(e){return Object(n["a"])({url:"/bpm/process-instance/get?id="+e,method:"get"})}},"473e":function(e,t,r){"use strict";r("a6eb")},4758:function(e,t,r){"use strict";var n=r("5530"),_=r("2909"),o=r("53ca"),s=(r("d3b7"),r("ddb0"),r("159b"),r("ac1f"),r("5319"),r("b64b"),r("4d63"),r("c607"),r("2c3e"),r("25f0"),r("caad"),r("99af"),r("ed08")),i={},a=r("9977"),c=a.keys()||[];function l(e,t){var r=this;e.props.value=t,e.on.input=function(e){r.$emit("input",e)}}function u(e,t,r){var n=i[t.__config__.tag];n&&Object.keys(n).forEach((function(_){var o=n[_];t.__slot__&&t.__slot__[_]&&r.push(o(e,t,_))}))}function f(e){var t=this;["on","nativeOn"].forEach((function(r){var n=Object.keys(e[r]||{});n.forEach((function(n){var _=e[r][n];"string"===typeof _&&(e[r][n]=function(e){return t.$emit(_,e)})}))}))}function d(e,t){var r=this;Object.keys(e).forEach((function(s){var i=e[s];"__vModel__"===s?l.call(r,t,e.__config__.defaultValue):void 0!==t[s]?null===t[s]||t[s]instanceof RegExp||["boolean","string","number","function"].includes(Object(o["a"])(t[s]))?t[s]=i:Array.isArray(t[s])?t[s]=[].concat(Object(_["a"])(t[s]),Object(_["a"])(i)):t[s]=Object(n["a"])(Object(n["a"])({},t[s]),i):t.attrs[s]=i})),p(t)}function p(e){delete e.attrs.__config__,delete e.attrs.__slot__,delete e.attrs.__methods__}function m(){return{class:{},attrs:{},props:{},domProps:{},nativeOn:{},on:{},style:{},directives:[],scopedSlots:{},slot:null,key:null,ref:null,refInFor:!0}}c.forEach((function(e){var t=e.replace(/^\.\/(.*)\.\w+$/,"$1"),r=a(e).default;i[t]=r})),t["a"]={props:{conf:{type:Object,required:!0}},render:function(e){var t=m(),r=Object(s["d"])(this.conf),n=this.$slots.default||[];return u.call(this,e,r,n),f.call(this,r),d.call(this,r,t),e(this.conf.__config__.tag,t,n)}}},7026:function(e,t,r){"use strict";r.d(t,"a",(function(){return _})),r.d(t,"f",(function(){return o})),r.d(t,"b",(function(){return s})),r.d(t,"c",(function(){return i})),r.d(t,"d",(function(){return a})),r.d(t,"e",(function(){return c}));var n=r("b775");function _(e){return Object(n["a"])({url:"/bpm/form/create",method:"post",data:e})}function o(e){return Object(n["a"])({url:"/bpm/form/update",method:"put",data:e})}function s(e){return Object(n["a"])({url:"/bpm/form/delete?id="+e,method:"delete"})}function i(e){return Object(n["a"])({url:"/bpm/form/get?id="+e,method:"get"})}function a(e){return Object(n["a"])({url:"/bpm/form/page",method:"get",params:e})}function c(){return Object(n["a"])({url:"/bpm/form/list-all-simple",method:"get"})}},"7f29":function(e,t,r){"use strict";r.r(t);r("d3b7"),r("159b");t["default"]={options:function(e,t,r){var n=[];return t.__slot__.options.forEach((function(t){n.push(e("el-option",{attrs:{label:t.label,value:t.value,disabled:t.disabled}}))})),n}}},"893f":function(e,t,r){"use strict";r.d(t,"c",(function(){return _})),r.d(t,"b",(function(){return o})),r.d(t,"a",(function(){return s}));var n=r("b775");function _(e){return Object(n["a"])({url:"/bpm/process-definition/page",method:"get",params:e})}function o(e){return Object(n["a"])({url:"/bpm/process-definition/list",method:"get",params:e})}function s(e){return Object(n["a"])({url:"/bpm/process-definition/get-bpmn-xml?id="+e,method:"get"})}},"933b":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-container"},[e.selectProcessInstance?r("div",[r("el-card",{staticClass:"box-card"},[r("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[r("span",{staticClass:"el-icon-document"},[e._v("申请信息【"+e._s(e.selectProcessInstance.name)+"】")]),r("el-button",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:function(t){e.selectProcessInstance=void 0}}},[e._v("选择其它流程")])],1),r("el-col",{attrs:{span:16,offset:6}},[r("div",[r("parser",{key:(new Date).getTime(),attrs:{"form-conf":e.detailForm},on:{submit:e.submitForm}})],1)])],1),r("el-card",{staticClass:"box-card"},[r("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[r("span",{staticClass:"el-icon-picture-outline"},[e._v("流程图")])]),r("my-process-viewer",e._b({key:"designer",model:{value:e.bpmnXML,callback:function(t){e.bpmnXML=t},expression:"bpmnXML"}},"my-process-viewer",e.bpmnControlForm,!1))],1)],1):r("div",[r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.list}},[r("el-table-column",{attrs:{label:"流程名称",align:"center",prop:"name",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"text"},on:{click:function(r){return e.handleBpmnDetail(t.row)}}},[r("span",[e._v(e._s(t.row.name))])])]}}],null,!1,3514958794)}),r("el-table-column",{attrs:{label:"流程分类",align:"center",prop:"category",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("dict-tag",{attrs:{type:e.DICT_TYPE.BPM_MODEL_CATEGORY,value:t.row.category}})]}}],null,!1,2916123306)}),r("el-table-column",{attrs:{label:"流程版本",align:"center",prop:"processDefinition.version",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row?r("el-tag",{attrs:{size:"medium"}},[e._v("v"+e._s(t.row.version))]):e._e()]}}],null,!1,84735486)}),r("el-table-column",{attrs:{label:"流程描述",align:"center",prop:"description",width:"300","show-overflow-tooltip":""}}),r("el-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"text",size:"small",icon:"el-icon-plus"},on:{click:function(r){return e.handleSelect(t.row)}}},[e._v("选择")])]}}],null,!1,839266362)})],1)],1)])},_=[],o=r("5530"),s=(r("d3b7"),r("ddb0"),r("893f")),i=r("b48e"),a=(r("7026"),r("fd8e")),c=r("9f75"),l=r("3930"),u={name:"ProcessInstanceCreate",components:{Parser:c["a"]},data:function(){return{loading:!0,list:[],detailForm:{fields:[]},bpmnXML:null,bpmnControlForm:{prefix:"activiti"},selectProcessInstance:void 0,categoryDictDatas:Object(i["c"])(i["a"].BPM_MODEL_CATEGORY)}},created:function(){this.getList()},methods:{getList:function(){var e=this;this.loading=!0,Object(s["b"])({suspensionState:1}).then((function(t){e.list=t.data,e.loading=!1}))},handleSelect:function(e){var t=this;this.selectProcessInstance=e,e.formId?(this.detailForm=Object(o["a"])(Object(o["a"])({},JSON.parse(e.formConf)),{},{fields:Object(a["a"])(e.formFields)}),Object(s["a"])(e.id).then((function(e){t.bpmnXML=e.data}))):e.formCustomCreatePath&&this.$router.push({path:e.formCustomCreatePath})},submitForm:function(e){var t=this;if(e){var r=e.conf;r.disabled=!0,r.formBtns=!1;var n=e.values;Object(l["b"])({processDefinitionId:this.selectProcessInstance.id,variables:n}).then((function(e){t.$modal.msgSuccess("发起流程成功"),t.$tab.closeOpenPage(),t.$router.go(-1)})).catch((function(){r.disabled=!1,r.formBtns=!0}))}}}},f=u,d=(r("473e"),r("2877")),p=Object(d["a"])(f,n,_,!1,null,null,null);t["default"]=p.exports},9413:function(e,t,r){"use strict";r.r(t);r("d3b7"),r("159b");t["default"]={options:function(e,t,r){var n=[];return t.__slot__.options.forEach((function(r){"button"===t.__config__.optionType?n.push(e("el-checkbox-button",{attrs:{label:r.value}},[r.label])):n.push(e("el-checkbox",{attrs:{label:r.value,border:t.border}},[r.label]))})),n}}},9977:function(e,t,r){var n={"./el-button.js":"aace","./el-checkbox-group.js":"9413","./el-input.js":"167d","./el-radio-group.js":"2cfa","./el-select.js":"7f29","./el-upload.js":"0f880"};function _(e){var t=o(e);return r(t)}function o(e){if(!r.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}_.keys=function(){return Object.keys(n)},_.resolve=o,e.exports=_,_.id="9977"},"9f75":function(e,t,r){"use strict";var n,_,o=r("f50d"),s=o["a"],i=r("2877"),a=Object(i["a"])(s,n,_,!1,null,null,null);t["a"]=a.exports},a6eb:function(e,t,r){},aace:function(e,t,r){"use strict";r.r(t),t["default"]={default:function(e,t,r){return t.__slot__[r]}}},f50d:function(module,__webpack_exports__,__webpack_require__){"use strict";var _Users_cqsongjin_project_ruoyi_vue_pro_yudao_ui_admin_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("ade3"),_vue_babel_helper_vue_jsx_merge_props__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("2638"),_vue_babel_helper_vue_jsx_merge_props__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_vue_babel_helper_vue_jsx_merge_props__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("d81d"),core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_2__),core_js_modules_es_error_cause_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("d9e2"),core_js_modules_es_error_cause_js__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_es_error_cause_js__WEBPACK_IMPORTED_MODULE_3__),core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("d3b7"),core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_4__),core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("159b"),core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_5__),core_js_modules_es_object_keys_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("b64b"),core_js_modules_es_object_keys_js__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(core_js_modules_es_object_keys_js__WEBPACK_IMPORTED_MODULE_6__),_utils_index__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("ed08"),_components_render_render_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("4758"),ruleTrigger={"el-input":"blur","el-input-number":"blur","el-select":"change","el-radio-group":"change","el-checkbox-group":"change","el-cascader":"change","el-time-picker":"change","el-date-picker":"change","el-rate":"change"},layouts={colFormItem:function(e,t){var r=t.__config__,n=buildListeners.call(this,t),_=r.labelWidth?"".concat(r.labelWidth,"px"):null;return!1===r.showLabel&&(_="0"),e("el-col",{attrs:{span:r.span}},[e("el-form-item",{attrs:{"label-width":_,prop:t.__vModel__,label:r.showLabel?r.label:""}},[e(_components_render_render_js__WEBPACK_IMPORTED_MODULE_8__["a"],_vue_babel_helper_vue_jsx_merge_props__WEBPACK_IMPORTED_MODULE_1___default()([{attrs:{conf:t}},{on:n}]))])])},rowFormItem:function(e,t){var r=renderChildren.apply(this,arguments);return"flex"===t.type&&(r=e("el-row",{attrs:{type:t.type,justify:t.justify,align:t.align}},[r])),e("el-col",{attrs:{span:t.span}},[e("el-row",{attrs:{gutter:t.gutter}},[r])])}};function renderFrom(e){var t=this.formConfCopy;return e("el-row",{attrs:{gutter:t.gutter}},[e("el-form",_vue_babel_helper_vue_jsx_merge_props__WEBPACK_IMPORTED_MODULE_1___default()([{attrs:{size:t.size,"label-position":t.labelPosition,disabled:t.disabled,"label-width":"".concat(t.labelWidth,"px")},ref:t.formRef},{props:{model:this[t.formModel]}},{attrs:{rules:this[t.formRules]}}]),[renderFormItem.call(this,e,t.fields),t.formBtns&&formBtns.call(this,e)])])}function formBtns(e){return e("el-col",[e("el-form-item",{attrs:{size:"large"}},[e("el-button",{attrs:{type:"primary"},on:{click:this.submitForm}},["提交"]),e("el-button",{on:{click:this.resetForm}},["重置"])])])}function renderFormItem(e,t){var r=this;return t.map((function(t){var n=t.__config__,_=layouts[n.layout];if(_)return _.call(r,e,t);throw new Error("没有与".concat(n.layout,"匹配的layout"))}))}function renderChildren(e,t){var r=t.__config__;return Array.isArray(r.children)?renderFormItem.call(this,e,r.children):null}function setValue(e,t,r){this.$set(t,"defaultValue",e),this.$set(this[this.formConf.formModel],r.__vModel__,e)}function buildListeners(e){var t=this,r=e.__config__,n=this.formConf.__methods__||{},_={};return Object.keys(n).forEach((function(e){_[e]=function(r){return n[e].call(t,r)}})),_.input=function(n){return setValue.call(t,n,r,e)},_}__webpack_exports__["a"]={components:{render:_components_render_render_js__WEBPACK_IMPORTED_MODULE_8__["a"]},props:{formConf:{type:Object,required:!0}},data:function(){var e,t=(e={formConfCopy:Object(_utils_index__WEBPACK_IMPORTED_MODULE_7__["d"])(this.formConf)},Object(_Users_cqsongjin_project_ruoyi_vue_pro_yudao_ui_admin_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__["a"])(e,this.formConf.formModel,{}),Object(_Users_cqsongjin_project_ruoyi_vue_pro_yudao_ui_admin_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__["a"])(e,this.formConf.formRules,{}),e);return this.initFormData(t.formConfCopy.fields,t[this.formConf.formModel]),this.buildRules(t.formConfCopy.fields,t[this.formConf.formRules]),t},methods:{initFormData:function(e,t){var r=this;e.forEach((function(e){var n=e.__config__;e.__vModel__&&(t[e.__vModel__]=n.defaultValue),n.children&&r.initFormData(n.children,t)}))},buildRules:function buildRules(componentList,rules){var _this4=this;componentList.forEach((function(cur){var config=cur.__config__;if(Array.isArray(config.regList)){if(config.required){var required={required:config.required,message:cur.placeholder};Array.isArray(config.defaultValue)&&(required.type="array",required.message="请至少选择一个".concat(config.label)),void 0===required.message&&(required.message="".concat(config.label,"不能为空")),config.regList.push(required)}rules[cur.__vModel__]=config.regList.map((function(item){return item.pattern&&(item.pattern=eval(item.pattern)),item.trigger=ruleTrigger&&ruleTrigger[config.tag],item}))}config.children&&_this4.buildRules(config.children,rules)}))},resetForm:function(){this.formConfCopy=Object(_utils_index__WEBPACK_IMPORTED_MODULE_7__["d"])(this.formConf),this.$refs[this.formConf.formRef].resetFields()},submitForm:function(){var e=this;this.$refs[this.formConf.formRef].validate((function(t){return!!t&&(e.$emit("submit",{conf:e.formConfCopy,values:e[e.formConf.formModel]}),!0)}))}},render:function(e){return renderFrom.call(this,e)}}},fd8e:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));r("d3b7"),r("159b");function n(e){var t=[];return e.forEach((function(e){t.push(JSON.parse(e))})),t}}}]);