(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4151e676"],{"0f880":function(e,t,r){"use strict";r.r(t),t["default"]={"list-type":function(e,t,r){var n=[],o=t.__config__;return"picture-card"===t["list-type"]?n.push(e("i",{class:"el-icon-plus"})):n.push(e("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-upload"}},[o.buttonText])),o.showTip&&n.push(e("div",{slot:"tip",class:"el-upload__tip"},["只能上传不超过 ",o.fileSize,o.sizeUnit," 的",t.accept,"文件"])),n}}},1378:function(e,t,r){},"167d":function(e,t,r){"use strict";r.r(t),t["default"]={prepend:function(e,t,r){return e("template",{slot:"prepend"},[t.__slot__[r]])},append:function(e,t,r){return e("template",{slot:"append"},[t.__slot__[r]])}}},2638:function(e,t,r){"use strict";function n(){return n=Object.assign||function(e){for(var t,r=1;r<arguments.length;r++)for(var n in t=arguments[r],t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},n.apply(this,arguments)}var o=["attrs","props","domProps"],s=["class","style","directives"],i=["on","nativeOn"],a=function(e){return e.reduce((function(e,t){for(var r in t)if(e[r])if(-1!==o.indexOf(r))e[r]=n({},e[r],t[r]);else if(-1!==s.indexOf(r)){var a=e[r]instanceof Array?e[r]:[e[r]],l=t[r]instanceof Array?t[r]:[t[r]];e[r]=a.concat(l)}else if(-1!==i.indexOf(r))for(var c in t[r])if(e[r][c]){var _=e[r][c]instanceof Array?e[r][c]:[e[r][c]],d=t[r][c]instanceof Array?t[r][c]:[t[r][c]];e[r][c]=_.concat(d)}else e[r][c]=t[r][c];else if("hook"==r)for(var p in t[r])e[r][p]=e[r][p]?u(e[r][p],t[r][p]):t[r][p];else e[r]=t[r];else e[r]=t[r];return e}),{})},u=function(e,t){return function(){e&&e.apply(this,arguments),t&&t.apply(this,arguments)}};e.exports=a},"2cfa":function(e,t,r){"use strict";r.r(t);r("d3b7"),r("159b");t["default"]={options:function(e,t,r){var n=[];return t.__slot__.options.forEach((function(r){"button"===t.__config__.optionType?n.push(e("el-radio-button",{attrs:{label:r.value}},[r.label])):n.push(e("el-radio",{attrs:{label:r.value,border:t.border}},[r.label]))})),n}}},3528:function(e,t,r){"use strict";r.d(t,"f",(function(){return o})),r.d(t,"g",(function(){return s})),r.d(t,"e",(function(){return i})),r.d(t,"a",(function(){return a})),r.d(t,"h",(function(){return u})),r.d(t,"b",(function(){return l})),r.d(t,"c",(function(){return c})),r.d(t,"d",(function(){return _}));var n=r("b775");function o(e){return Object(n["a"])({url:"/system/role/page",method:"get",params:e})}function s(){return Object(n["a"])({url:"/system/role/list-all-simple",method:"get"})}function i(e){return Object(n["a"])({url:"/system/role/get?id="+e,method:"get"})}function a(e){return Object(n["a"])({url:"/system/role/create",method:"post",data:e})}function u(e){return Object(n["a"])({url:"/system/role/update",method:"put",data:e})}function l(e,t){var r={id:e,status:t};return Object(n["a"])({url:"/system/role/update-status",method:"put",data:r})}function c(e){return Object(n["a"])({url:"/system/role/delete?id="+e,method:"delete"})}function _(e){return Object(n["a"])({url:"/system/role/export",method:"get",params:e,responseType:"blob"})}},4758:function(e,t,r){"use strict";var n=r("5530"),o=r("2909"),s=r("53ca"),i=(r("d3b7"),r("ddb0"),r("159b"),r("ac1f"),r("5319"),r("b64b"),r("4d63"),r("c607"),r("2c3e"),r("25f0"),r("caad"),r("99af"),r("ed08")),a={},u=r("9977"),l=u.keys()||[];function c(e,t){var r=this;e.props.value=t,e.on.input=function(e){r.$emit("input",e)}}function _(e,t,r){var n=a[t.__config__.tag];n&&Object.keys(n).forEach((function(o){var s=n[o];t.__slot__&&t.__slot__[o]&&r.push(s(e,t,o))}))}function d(e){var t=this;["on","nativeOn"].forEach((function(r){var n=Object.keys(e[r]||{});n.forEach((function(n){var o=e[r][n];"string"===typeof o&&(e[r][n]=function(e){return t.$emit(o,e)})}))}))}function p(e,t){var r=this;Object.keys(e).forEach((function(i){var a=e[i];"__vModel__"===i?c.call(r,t,e.__config__.defaultValue):void 0!==t[i]?null===t[i]||t[i]instanceof RegExp||["boolean","string","number","function"].includes(Object(s["a"])(t[i]))?t[i]=a:Array.isArray(t[i])?t[i]=[].concat(Object(o["a"])(t[i]),Object(o["a"])(a)):t[i]=Object(n["a"])(Object(n["a"])({},t[i]),a):t.attrs[i]=a})),f(t)}function f(e){delete e.attrs.__config__,delete e.attrs.__slot__,delete e.attrs.__methods__}function m(){return{class:{},attrs:{},props:{},domProps:{},nativeOn:{},on:{},style:{},directives:[],scopedSlots:{},slot:null,key:null,ref:null,refInFor:!0}}l.forEach((function(e){var t=e.replace(/^\.\/(.*)\.\w+$/,"$1"),r=u(e).default;a[t]=r})),t["a"]={props:{conf:{type:Object,required:!0}},render:function(e){var t=m(),r=Object(i["d"])(this.conf),n=this.$slots.default||[];return _.call(this,e,r,n),d.call(this,r),p.call(this,r,t),e(this.conf.__config__.tag,t,n)}}},7026:function(e,t,r){"use strict";r.d(t,"a",(function(){return o})),r.d(t,"f",(function(){return s})),r.d(t,"b",(function(){return i})),r.d(t,"c",(function(){return a})),r.d(t,"d",(function(){return u})),r.d(t,"e",(function(){return l}));var n=r("b775");function o(e){return Object(n["a"])({url:"/bpm/form/create",method:"post",data:e})}function s(e){return Object(n["a"])({url:"/bpm/form/update",method:"put",data:e})}function i(e){return Object(n["a"])({url:"/bpm/form/delete?id="+e,method:"delete"})}function a(e){return Object(n["a"])({url:"/bpm/form/get?id="+e,method:"get"})}function u(e){return Object(n["a"])({url:"/bpm/form/page",method:"get",params:e})}function l(){return Object(n["a"])({url:"/bpm/form/list-all-simple",method:"get"})}},"74b1":function(e,t,r){"use strict";r.d(t,"e",(function(){return o})),r.d(t,"f",(function(){return s})),r.d(t,"d",(function(){return i})),r.d(t,"a",(function(){return a})),r.d(t,"g",(function(){return u})),r.d(t,"b",(function(){return l})),r.d(t,"c",(function(){return c}));var n=r("b775");function o(e){return Object(n["a"])({url:"/system/post/page",method:"get",params:e})}function s(){return Object(n["a"])({url:"/system/post/list-all-simple",method:"get"})}function i(e){return Object(n["a"])({url:"/system/post/get?id="+e,method:"get"})}function a(e){return Object(n["a"])({url:"/system/post/create",method:"post",data:e})}function u(e){return Object(n["a"])({url:"/system/post/update",method:"put",data:e})}function l(e){return Object(n["a"])({url:"/system/post/delete?id="+e,method:"delete"})}function c(e){return Object(n["a"])({url:"/system/post/export",method:"get",params:e,responseType:"blob"})}},"7f29":function(e,t,r){"use strict";r.r(t);r("d3b7"),r("159b");t["default"]={options:function(e,t,r){var n=[];return t.__slot__.options.forEach((function(t){n.push(e("el-option",{attrs:{label:t.label,value:t.value,disabled:t.disabled}}))})),n}}},"82c5":function(e,t,r){"use strict";r("1378")},"893f":function(e,t,r){"use strict";r.d(t,"c",(function(){return o})),r.d(t,"b",(function(){return s})),r.d(t,"a",(function(){return i}));var n=r("b775");function o(e){return Object(n["a"])({url:"/bpm/process-definition/page",method:"get",params:e})}function s(e){return Object(n["a"])({url:"/bpm/process-definition/list",method:"get",params:e})}function i(e){return Object(n["a"])({url:"/bpm/process-definition/get-bpmn-xml?id="+e,method:"get"})}},"89a0":function(e,t,r){"use strict";r.d(t,"a",(function(){return o})),r.d(t,"f",(function(){return s})),r.d(t,"b",(function(){return i})),r.d(t,"c",(function(){return a})),r.d(t,"d",(function(){return u})),r.d(t,"e",(function(){return l}));var n=r("b775");function o(e){return Object(n["a"])({url:"/bpm/user-group/create",method:"post",data:e})}function s(e){return Object(n["a"])({url:"/bpm/user-group/update",method:"put",data:e})}function i(e){return Object(n["a"])({url:"/bpm/user-group/delete?id="+e,method:"delete"})}function a(e){return Object(n["a"])({url:"/bpm/user-group/get?id="+e,method:"get"})}function u(e){return Object(n["a"])({url:"/bpm/user-group/page",method:"get",params:e})}function l(){return Object(n["a"])({url:"/bpm/user-group/list-all-simple",method:"get"})}},9413:function(e,t,r){"use strict";r.r(t);r("d3b7"),r("159b");t["default"]={options:function(e,t,r){var n=[];return t.__slot__.options.forEach((function(r){"button"===t.__config__.optionType?n.push(e("el-checkbox-button",{attrs:{label:r.value}},[r.label])):n.push(e("el-checkbox",{attrs:{label:r.value,border:t.border}},[r.label]))})),n}}},9977:function(e,t,r){var n={"./el-button.js":"aace","./el-checkbox-group.js":"9413","./el-input.js":"167d","./el-radio-group.js":"2cfa","./el-select.js":"7f29","./el-upload.js":"0f880"};function o(e){var t=s(e);return r(t)}function s(e){if(!r.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}o.keys=function(){return Object.keys(n)},o.resolve=s,e.exports=o,o.id="9977"},"9f75":function(e,t,r){"use strict";var n,o,s=r("f50d"),i=s["a"],a=r("2877"),u=Object(a["a"])(i,n,o,!1,null,null,null);t["a"]=u.exports},aace:function(e,t,r){"use strict";r.r(t),t["default"]={default:function(e,t,r){return t.__slot__[r]}}},c0c7:function(e,t,r){"use strict";r.d(t,"i",(function(){return s})),r.d(t,"h",(function(){return i})),r.d(t,"e",(function(){return a})),r.d(t,"a",(function(){return u})),r.d(t,"k",(function(){return l})),r.d(t,"c",(function(){return c})),r.d(t,"d",(function(){return _})),r.d(t,"j",(function(){return d})),r.d(t,"b",(function(){return p})),r.d(t,"f",(function(){return f})),r.d(t,"l",(function(){return m})),r.d(t,"m",(function(){return b})),r.d(t,"n",(function(){return h})),r.d(t,"g",(function(){return g}));var n=r("b775"),o=r("c38a");function s(e){return Object(n["a"])({url:"/system/user/page",method:"get",params:e})}function i(){return Object(n["a"])({url:"/system/user/list-all-simple",method:"get"})}function a(e){return Object(n["a"])({url:"/system/user/get?id="+Object(o["g"])(e),method:"get"})}function u(e){return Object(n["a"])({url:"/system/user/create",method:"post",data:e})}function l(e){return Object(n["a"])({url:"/system/user/update",method:"put",data:e})}function c(e){return Object(n["a"])({url:"/system/user/delete?id="+e,method:"delete"})}function _(e){return Object(n["a"])({url:"/system/user/export",method:"get",params:e,responseType:"blob"})}function d(e,t){var r={id:e,password:t};return Object(n["a"])({url:"/system/user/update-password",method:"put",data:r})}function p(e,t){var r={id:e,status:t};return Object(n["a"])({url:"/system/user/update-status",method:"put",data:r})}function f(){return Object(n["a"])({url:"/system/user/profile/get",method:"get"})}function m(e){return Object(n["a"])({url:"/system/user/profile/update",method:"put",data:e})}function b(e,t){var r={oldPassword:e,newPassword:t};return Object(n["a"])({url:"/system/user/profile/update-password",method:"put",data:r})}function h(e){return Object(n["a"])({url:"/system/user/profile/update-avatar",method:"put",data:e})}function g(){return Object(n["a"])({url:"/system/user/get-import-template",method:"get",responseType:"blob"})}},d710:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-container"},[r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.list}},[r("el-table-column",{attrs:{label:"定义编号",align:"center",prop:"id",width:"400"}}),r("el-table-column",{attrs:{label:"定义名称",align:"center",prop:"name",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"text"},on:{click:function(r){return e.handleBpmnDetail(t.row)}}},[r("span",[e._v(e._s(t.row.name))])])]}}])}),r("el-table-column",{attrs:{label:"定义分类",align:"center",prop:"category",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("dict-tag",{attrs:{type:e.DICT_TYPE.BPM_MODEL_CATEGORY,value:t.row.category}})]}}])}),r("el-table-column",{attrs:{label:"表单信息",align:"center",prop:"formType",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.formId?r("el-button",{attrs:{type:"text"},on:{click:function(r){return e.handleFormDetail(t.row)}}},[r("span",[e._v(e._s(t.row.formName))])]):t.row.formCustomCreatePath?r("el-button",{attrs:{type:"text"},on:{click:function(r){return e.handleFormDetail(t.row)}}},[r("span",[e._v(e._s(t.row.formCustomCreatePath))])]):r("label",[e._v("暂无表单")])]}}])}),r("el-table-column",{attrs:{label:"流程版本",align:"center",prop:"processDefinition.version",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row?r("el-tag",{attrs:{size:"medium"}},[e._v("v"+e._s(t.row.version))]):r("el-tag",{attrs:{size:"medium",type:"warning"}},[e._v("未部署")])]}}])}),r("el-table-column",{attrs:{label:"状态",align:"center",prop:"version",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[1===t.row.suspensionState?r("el-tag",{attrs:{type:"success"}},[e._v("激活")]):e._e(),2===t.row.suspensionState?r("el-tag",{attrs:{type:"warning"}},[e._v("挂起")]):e._e()]}}])}),r("el-table-column",{attrs:{label:"部署时间",align:"center",prop:"deploymentTime",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(e.parseTime(t.row.deploymentTime)))])]}}])}),r("el-table-column",{attrs:{label:"定义描述",align:"center",prop:"description",width:"300","show-overflow-tooltip":""}}),r("el-table-column",{attrs:{label:"操作",align:"center",width:"150",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["bpm:task-assign-rule:update"],expression:"['bpm:task-assign-rule:update']"}],attrs:{size:"mini",type:"text",icon:"el-icon-s-custom"},on:{click:function(r){return e.handleAssignRule(t.row)}}},[e._v("分配规则")])]}}])})],1),r("el-dialog",{attrs:{title:"表单详情",visible:e.detailOpen,width:"50%","append-to-body":""},on:{"update:visible":function(t){e.detailOpen=t}}},[r("parser",{key:(new Date).getTime(),attrs:{"form-conf":e.detailForm}})],1),r("el-dialog",{attrs:{title:"流程图",visible:e.showBpmnOpen,width:"80%","append-to-body":""},on:{"update:visible":function(t){e.showBpmnOpen=t}}},[r("my-process-viewer",e._b({key:"designer",model:{value:e.bpmnXML,callback:function(t){e.bpmnXML=t},expression:"bpmnXML"}},"my-process-viewer",e.bpmnControlForm,!1))],1),r("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.queryParams.pageNo,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNo",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}}),r("taskAssignRuleDialog",{ref:"taskAssignRuleDialog"})],1)},o=[],s=r("5530"),i=r("893f"),a=r("b48e"),u=(r("7026"),r("fd8e")),l=r("9f75"),c=r("d9ec"),_={name:"processDefinition",components:{Parser:l["a"],taskAssignRuleDialog:c["default"]},data:function(){return{loading:!0,total:0,list:[],queryParams:{pageNo:1,pageSize:10},detailOpen:!1,detailForm:{fields:[]},showBpmnOpen:!1,bpmnXML:null,bpmnControlForm:{prefix:"activiti"},categoryDictDatas:Object(a["c"])(a["a"].BPM_MODEL_CATEGORY)}},created:function(){var e=this.$route.query&&this.$route.query.key;e&&(this.queryParams["key"]=e),this.getList()},methods:{getList:function(){var e=this;this.loading=!0,Object(i["c"])(this.queryParams).then((function(t){e.list=t.data.list,e.total=t.data.total,e.loading=!1}))},handleFormDetail:function(e){e.formId?(this.detailForm=Object(s["a"])(Object(s["a"])({},JSON.parse(e.formConf)),{},{fields:Object(u["a"])(e.formFields)}),this.detailOpen=!0):e.formCustomCreatePath&&this.$router.push({path:e.formCustomCreatePath})},handleBpmnDetail:function(e){var t=this;Object(i["a"])(e.id).then((function(e){t.bpmnXML=e.data,t.showBpmnOpen=!0}))},handleAssignRule:function(e){this.$refs["taskAssignRuleDialog"].initProcessDefinition(e.id)}}},d=_,p=(r("82c5"),r("2877")),f=Object(p["a"])(d,n,o,!1,null,null,null);t["default"]=f.exports},d9ec:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-dialog",{attrs:{title:"任务分配规则",visible:e.visible,width:"800px","append-to-body":""},on:{"update:visible":function(t){e.visible=t}}},[r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.list}},[r("el-table-column",{attrs:{label:"任务名",align:"center",prop:"taskDefinitionName",width:"120",fixed:""}}),r("el-table-column",{attrs:{label:"任务标识",align:"center",prop:"taskDefinitionKey",width:"120","show-tooltip-when-overflow":""}}),r("el-table-column",{attrs:{label:"规则类型",align:"center",prop:"type",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("dict-tag",{attrs:{type:e.DICT_TYPE.BPM_TASK_ASSIGN_RULE_TYPE,value:t.row.type}})]}}])}),r("el-table-column",{attrs:{label:"规则范围",align:"center",prop:"options",width:"440px"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.options,(function(n){return t.row.options?r("el-tag",{attrs:{size:"medium"}},[e._v(" "+e._s(e.getAssignRuleOptionName(t.row.type,n))+" ")]):e._e()}))}}])}),e.modelId?r("el-table-column",{attrs:{label:"操作",align:"center",width:"80",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["bpm:task-assign-rule:update"],expression:"['bpm:task-assign-rule:update']"}],attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(r){return e.handleUpdateTaskAssignRule(t.row)}}},[e._v("修改")])]}}],null,!1,761480949)}):e._e()],1)],1),r("el-dialog",{attrs:{title:"修改任务规则",visible:e.open,width:"500px","append-to-body":""},on:{"update:visible":function(t){e.open=t}}},[r("el-form",{ref:"taskAssignRuleForm",attrs:{model:e.form,rules:e.rules,"label-width":"110px"}},[r("el-form-item",{attrs:{label:"任务名称",prop:"taskDefinitionName"}},[r("el-input",{attrs:{disabled:""},model:{value:e.form.taskDefinitionName,callback:function(t){e.$set(e.form,"taskDefinitionName",t)},expression:"form.taskDefinitionName"}})],1),r("el-form-item",{attrs:{label:"任务标识",prop:"taskDefinitionKey"}},[r("el-input",{attrs:{disabled:""},model:{value:e.form.taskDefinitionKey,callback:function(t){e.$set(e.form,"taskDefinitionKey",t)},expression:"form.taskDefinitionKey"}})],1),r("el-form-item",{attrs:{label:"规则类型",prop:"type"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{clearable:""},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},e._l(e.taskAssignRuleTypeDictDatas,(function(e){return r("el-option",{key:parseInt(e.value),attrs:{label:e.label,value:parseInt(e.value)}})})),1)],1),10===e.form.type?r("el-form-item",{attrs:{label:"指定角色",prop:"roleIds"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{multiple:"",clearable:""},model:{value:e.form.roleIds,callback:function(t){e.$set(e.form,"roleIds",t)},expression:"form.roleIds"}},e._l(e.roleOptions,(function(e){return r("el-option",{key:parseInt(e.id),attrs:{label:e.name,value:parseInt(e.id)}})})),1)],1):e._e(),20===e.form.type||21===e.form.type?r("el-form-item",{attrs:{label:"指定部门",prop:"deptIds"}},[r("treeselect",{attrs:{options:e.deptTreeOptions,multiple:"",flat:"",defaultExpandLevel:3,placeholder:"请选择指定部门",normalizer:e.normalizer},model:{value:e.form.deptIds,callback:function(t){e.$set(e.form,"deptIds",t)},expression:"form.deptIds"}})],1):e._e(),22===e.form.type?r("el-form-item",{attrs:{label:"指定岗位",prop:"postIds"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{multiple:"",clearable:""},model:{value:e.form.postIds,callback:function(t){e.$set(e.form,"postIds",t)},expression:"form.postIds"}},e._l(e.postOptions,(function(e){return r("el-option",{key:parseInt(e.id),attrs:{label:e.name,value:parseInt(e.id)}})})),1)],1):e._e(),30===e.form.type?r("el-form-item",{attrs:{label:"指定用户",prop:"userIds"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{multiple:"",clearable:""},model:{value:e.form.userIds,callback:function(t){e.$set(e.form,"userIds",t)},expression:"form.userIds"}},e._l(e.userOptions,(function(e){return r("el-option",{key:parseInt(e.id),attrs:{label:e.nickname,value:parseInt(e.id)}})})),1)],1):e._e(),40===e.form.type?r("el-form-item",{attrs:{label:"指定用户组",prop:"userGroupIds"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{multiple:"",clearable:""},model:{value:e.form.userGroupIds,callback:function(t){e.$set(e.form,"userGroupIds",t)},expression:"form.userGroupIds"}},e._l(e.userGroupOptions,(function(e){return r("el-option",{key:parseInt(e.id),attrs:{label:e.name,value:parseInt(e.id)}})})),1)],1):e._e(),50===e.form.type?r("el-form-item",{attrs:{label:"指定脚本",prop:"scripts"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{multiple:"",clearable:""},model:{value:e.form.scripts,callback:function(t){e.$set(e.form,"scripts",t)},expression:"form.scripts"}},e._l(e.taskAssignScriptDictDatas,(function(e){return r("el-option",{key:parseInt(e.value),attrs:{label:e.label,value:parseInt(e.value)}})})),1)],1):e._e()],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:e.submitAssignRuleForm}},[e._v("确 定")]),r("el-button",{on:{click:e.cancelAssignRuleForm}},[e._v("取 消")])],1)],1)],1)},o=[],s=r("b85c"),i=r("5530"),a=r("2909"),u=(r("b0c0"),r("b48e")),l=r("b775");function c(e){return Object(l["a"])({url:"/bpm/task-assign-rule/list",method:"get",params:e})}function _(e){return Object(l["a"])({url:"/bpm/task-assign-rule/create",method:"post",data:e})}function d(e){return Object(l["a"])({url:"/bpm/task-assign-rule/update",method:"put",data:e})}var p=r("3528"),f=r("fcb7"),m=r("ca17"),b=r.n(m),h=(r("542c"),r("74b1")),g=r("c0c7"),y=r("89a0"),O={name:"taskAssignRuleDialog",components:{Treeselect:b.a},data:function(){return{modelId:void 0,processDefinitionId:void 0,visible:!1,row:void 0,list:[],loading:!1,open:!1,form:{},rules:{type:[{required:!0,message:"规则类型不能为空",trigger:"change"}],roleIds:[{required:!0,message:"指定角色不能为空",trigger:"change"}],deptIds:[{required:!0,message:"指定部门不能为空",trigger:"change"}],postIds:[{required:!0,message:"指定岗位不能为空",trigger:"change"}],userIds:[{required:!0,message:"指定用户不能为空",trigger:"change"}],userGroupIds:[{required:!0,message:"指定用户组不能为空",trigger:"change"}],scripts:[{required:!0,message:"指定脚本不能为空",trigger:"change"}]},roleOptions:[],deptOptions:[],deptTreeOptions:[],postOptions:[],userOptions:[],userGroupOptions:[],modelFormTypeDictDatas:Object(u["c"])(u["a"].BPM_MODEL_FORM_TYPE),taskAssignRuleTypeDictDatas:Object(u["c"])(u["a"].BPM_TASK_ASSIGN_RULE_TYPE),taskAssignScriptDictDatas:Object(u["c"])(u["a"].BPM_TASK_ASSIGN_SCRIPT)}},methods:{initModel:function(e){this.modelId=e,this.processDefinitionId=void 0,this.init0()},initProcessDefinition:function(e){this.modelId=void 0,this.processDefinitionId=e,this.init0()},init0:function(){var e=this;this.visible=!0,this.getList(),this.roleOptions=[],Object(p["g"])().then((function(t){var r;(r=e.roleOptions).push.apply(r,Object(a["a"])(t.data))})),this.deptOptions=[],this.deptTreeOptions=[],Object(f["e"])().then((function(t){var r,n;(r=e.deptOptions).push.apply(r,Object(a["a"])(t.data)),(n=e.deptTreeOptions).push.apply(n,Object(a["a"])(e.handleTree(t.data,"id")))})),this.postOptions=[],Object(h["f"])().then((function(t){var r;(r=e.postOptions).push.apply(r,Object(a["a"])(t.data))})),this.userOptions=[],Object(g["h"])().then((function(t){var r;(r=e.userOptions).push.apply(r,Object(a["a"])(t.data))})),this.userGroupOptions=[],Object(y["e"])().then((function(t){var r;(r=e.userGroupOptions).push.apply(r,Object(a["a"])(t.data))}))},getList:function(){var e=this;this.loading=!0,c({modelId:this.modelId,processDefinitionId:this.processDefinitionId}).then((function(t){e.loading=!1,e.list=t.data}))},handleUpdateTaskAssignRule:function(e){var t;if(this.resetAssignRuleForm(),this.form=Object(i["a"])(Object(i["a"])({},e),{},{options:[],roleIds:[],deptIds:[],postIds:[],userIds:[],userGroupIds:[],scripts:[]}),10===e.type)(t=this.form.roleIds).push.apply(t,Object(a["a"])(e.options));else if(20===e.type||21===e.type){var r;(r=this.form.deptIds).push.apply(r,Object(a["a"])(e.options))}else if(22===e.type){var n;(n=this.form.postIds).push.apply(n,Object(a["a"])(e.options))}else if(30===e.type){var o;(o=this.form.userIds).push.apply(o,Object(a["a"])(e.options))}else if(40===e.type){var s;(s=this.form.userGroupIds).push.apply(s,Object(a["a"])(e.options))}else if(50===e.type){var u;(u=this.form.scripts).push.apply(u,Object(a["a"])(e.options))}this.open=!0},submitAssignRuleForm:function(){var e=this;this.$refs["taskAssignRuleForm"].validate((function(t){if(t){var r=Object(i["a"])(Object(i["a"])({},e.form),{},{taskDefinitionName:void 0});10===r.type?r.options=r.roleIds:20===r.type||21===r.type?r.options=r.deptIds:22===r.type?r.options=r.postIds:30===r.type?r.options=r.userIds:40===r.type?r.options=r.userGroupIds:50===r.type&&(r.options=r.scripts),r.roleIds=void 0,r.deptIds=void 0,r.postIds=void 0,r.userIds=void 0,r.userGroupIds=void 0,r.scripts=void 0,r.id?(r.taskDefinitionKey=void 0,d(r).then((function(t){e.$modal.msgSuccess("修改成功"),e.open=!1,e.getList()}))):(r.modelId=e.modelId,_(r).then((function(t){e.$modal.msgSuccess("修改成功"),e.open=!1,e.getList()})))}}))},cancelAssignRuleForm:function(){this.open=!1,this.resetAssignRuleForm()},resetAssignRuleForm:function(){this.form={},this.resetForm("taskAssignRuleForm")},getAssignRuleOptionName:function(e,t){if(10===e){var r,n=Object(s["a"])(this.roleOptions);try{for(n.s();!(r=n.n()).done;){var o=r.value;if(o.id===t)return o.name}}catch(v){n.e(v)}finally{n.f()}}else if(20===e||21===e){var i,a=Object(s["a"])(this.deptOptions);try{for(a.s();!(i=a.n()).done;){var u=i.value;if(u.id===t)return u.name}}catch(v){a.e(v)}finally{a.f()}}else if(22===e){var l,c=Object(s["a"])(this.postOptions);try{for(c.s();!(l=c.n()).done;){var _=l.value;if(_.id===t)return _.name}}catch(v){c.e(v)}finally{c.f()}}else if(30===e){var d,p=Object(s["a"])(this.userOptions);try{for(p.s();!(d=p.n()).done;){var f=d.value;if(f.id===t)return f.nickname}}catch(v){p.e(v)}finally{p.f()}}else if(40===e){var m,b=Object(s["a"])(this.userGroupOptions);try{for(b.s();!(m=b.n()).done;){var h=m.value;if(h.id===t)return h.name}}catch(v){b.e(v)}finally{b.f()}}else if(50===e){t+="";var g,y=Object(s["a"])(this.taskAssignScriptDictDatas);try{for(y.s();!(g=y.n()).done;){var O=g.value;if(O.value===t)return O.label}}catch(v){y.e(v)}finally{y.f()}}return"未知("+t+")"},normalizer:function(e){return{id:e.id,label:e.name,children:e.children}}}},v=O,j=r("2877"),E=Object(j["a"])(v,n,o,!1,null,null,null);t["default"]=E.exports},f50d:function(module,__webpack_exports__,__webpack_require__){"use strict";var _Users_cqsongjin_project_ruoyi_vue_pro_yudao_ui_admin_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("ade3"),_vue_babel_helper_vue_jsx_merge_props__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("2638"),_vue_babel_helper_vue_jsx_merge_props__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_vue_babel_helper_vue_jsx_merge_props__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("d81d"),core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_2__),core_js_modules_es_error_cause_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("d9e2"),core_js_modules_es_error_cause_js__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_es_error_cause_js__WEBPACK_IMPORTED_MODULE_3__),core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("d3b7"),core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_4__),core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("159b"),core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_5__),core_js_modules_es_object_keys_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("b64b"),core_js_modules_es_object_keys_js__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(core_js_modules_es_object_keys_js__WEBPACK_IMPORTED_MODULE_6__),_utils_index__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("ed08"),_components_render_render_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("4758"),ruleTrigger={"el-input":"blur","el-input-number":"blur","el-select":"change","el-radio-group":"change","el-checkbox-group":"change","el-cascader":"change","el-time-picker":"change","el-date-picker":"change","el-rate":"change"},layouts={colFormItem:function(e,t){var r=t.__config__,n=buildListeners.call(this,t),o=r.labelWidth?"".concat(r.labelWidth,"px"):null;return!1===r.showLabel&&(o="0"),e("el-col",{attrs:{span:r.span}},[e("el-form-item",{attrs:{"label-width":o,prop:t.__vModel__,label:r.showLabel?r.label:""}},[e(_components_render_render_js__WEBPACK_IMPORTED_MODULE_8__["a"],_vue_babel_helper_vue_jsx_merge_props__WEBPACK_IMPORTED_MODULE_1___default()([{attrs:{conf:t}},{on:n}]))])])},rowFormItem:function(e,t){var r=renderChildren.apply(this,arguments);return"flex"===t.type&&(r=e("el-row",{attrs:{type:t.type,justify:t.justify,align:t.align}},[r])),e("el-col",{attrs:{span:t.span}},[e("el-row",{attrs:{gutter:t.gutter}},[r])])}};function renderFrom(e){var t=this.formConfCopy;return e("el-row",{attrs:{gutter:t.gutter}},[e("el-form",_vue_babel_helper_vue_jsx_merge_props__WEBPACK_IMPORTED_MODULE_1___default()([{attrs:{size:t.size,"label-position":t.labelPosition,disabled:t.disabled,"label-width":"".concat(t.labelWidth,"px")},ref:t.formRef},{props:{model:this[t.formModel]}},{attrs:{rules:this[t.formRules]}}]),[renderFormItem.call(this,e,t.fields),t.formBtns&&formBtns.call(this,e)])])}function formBtns(e){return e("el-col",[e("el-form-item",{attrs:{size:"large"}},[e("el-button",{attrs:{type:"primary"},on:{click:this.submitForm}},["提交"]),e("el-button",{on:{click:this.resetForm}},["重置"])])])}function renderFormItem(e,t){var r=this;return t.map((function(t){var n=t.__config__,o=layouts[n.layout];if(o)return o.call(r,e,t);throw new Error("没有与".concat(n.layout,"匹配的layout"))}))}function renderChildren(e,t){var r=t.__config__;return Array.isArray(r.children)?renderFormItem.call(this,e,r.children):null}function setValue(e,t,r){this.$set(t,"defaultValue",e),this.$set(this[this.formConf.formModel],r.__vModel__,e)}function buildListeners(e){var t=this,r=e.__config__,n=this.formConf.__methods__||{},o={};return Object.keys(n).forEach((function(e){o[e]=function(r){return n[e].call(t,r)}})),o.input=function(n){return setValue.call(t,n,r,e)},o}__webpack_exports__["a"]={components:{render:_components_render_render_js__WEBPACK_IMPORTED_MODULE_8__["a"]},props:{formConf:{type:Object,required:!0}},data:function(){var e,t=(e={formConfCopy:Object(_utils_index__WEBPACK_IMPORTED_MODULE_7__["d"])(this.formConf)},Object(_Users_cqsongjin_project_ruoyi_vue_pro_yudao_ui_admin_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__["a"])(e,this.formConf.formModel,{}),Object(_Users_cqsongjin_project_ruoyi_vue_pro_yudao_ui_admin_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__["a"])(e,this.formConf.formRules,{}),e);return this.initFormData(t.formConfCopy.fields,t[this.formConf.formModel]),this.buildRules(t.formConfCopy.fields,t[this.formConf.formRules]),t},methods:{initFormData:function(e,t){var r=this;e.forEach((function(e){var n=e.__config__;e.__vModel__&&(t[e.__vModel__]=n.defaultValue),n.children&&r.initFormData(n.children,t)}))},buildRules:function buildRules(componentList,rules){var _this4=this;componentList.forEach((function(cur){var config=cur.__config__;if(Array.isArray(config.regList)){if(config.required){var required={required:config.required,message:cur.placeholder};Array.isArray(config.defaultValue)&&(required.type="array",required.message="请至少选择一个".concat(config.label)),void 0===required.message&&(required.message="".concat(config.label,"不能为空")),config.regList.push(required)}rules[cur.__vModel__]=config.regList.map((function(item){return item.pattern&&(item.pattern=eval(item.pattern)),item.trigger=ruleTrigger&&ruleTrigger[config.tag],item}))}config.children&&_this4.buildRules(config.children,rules)}))},resetForm:function(){this.formConfCopy=Object(_utils_index__WEBPACK_IMPORTED_MODULE_7__["d"])(this.formConf),this.$refs[this.formConf.formRef].resetFields()},submitForm:function(){var e=this;this.$refs[this.formConf.formRef].validate((function(t){return!!t&&(e.$emit("submit",{conf:e.formConfCopy,values:e[e.formConf.formModel]}),!0)}))}},render:function(e){return renderFrom.call(this,e)}}},fcb7:function(e,t,r){"use strict";r.d(t,"d",(function(){return o})),r.d(t,"c",(function(){return s})),r.d(t,"e",(function(){return i})),r.d(t,"a",(function(){return a})),r.d(t,"f",(function(){return u})),r.d(t,"b",(function(){return l}));var n=r("b775");function o(e){return Object(n["a"])({url:"/system/dept/list",method:"get",params:e})}function s(e){return Object(n["a"])({url:"/system/dept/get?id="+e,method:"get"})}function i(){return Object(n["a"])({url:"/system/dept/list-all-simple",method:"get"})}function a(e){return Object(n["a"])({url:"/system/dept/create",method:"post",data:e})}function u(e){return Object(n["a"])({url:"/system/dept/update",method:"put",data:e})}function l(e){return Object(n["a"])({url:"/system/dept/delete?id="+e,method:"delete"})}},fd8e:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));r("d3b7"),r("159b");function n(e){var t=[];return e.forEach((function(e){t.push(JSON.parse(e))})),t}}}]);